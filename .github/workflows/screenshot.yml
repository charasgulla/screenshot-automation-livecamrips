name: Screenshot Automation
on:
  workflow_dispatch: # Allows manual runs from the Actions tab

jobs:
  screenshot:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y python3-pip
        pip3 install playwright==1.45.0
        playwright install --with-deps chromium

    - name: Run screenshot script
      run: |
        python3 screenshotter.py list \
          --file urls.txt \
          --output screenshots \
          --delay 1 \
          --timeout 120000 \
          --max-urls 50  # Start with 50 to avoid timeout, then increase

    - name: Upload screenshots
      uses: actions/upload-artifact@v4
      with:
        name: screenshots
        path: screenshots
